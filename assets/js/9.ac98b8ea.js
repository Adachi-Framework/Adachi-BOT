(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{394:function(t,s,a){"use strict";a.r(s);var e=a(54),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"应用部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#应用部署"}},[t._v("#")]),t._v(" 应用部署")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("以下内容仅介绍 Linux 环境中部署方式，两种方式 Docker 和 PM2 任选其一。如果你希望在 Windows 中部署，请参考 "),a("RouterLink",{attrs:{to:"/deploy/windows.html"}},[t._v("这里")])],1)]),t._v(" "),a("h2",{attrs:{id:"安装及启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装及启动"}},[t._v("#")]),t._v(" 安装及启动")]),t._v(" "),a("h3",{attrs:{id:"docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker"}},[t._v("#")]),t._v(" Docker")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://ghproxy.com/https://github.com/SilveryStar/Adachi-BOT.git\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" Adachi-BOT\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 初次运行将在根目录 config 文件夹下生成配置文件模板")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 根据右上角「配置」选项中的信息配置 setting.yml")]),t._v("\ndocker-compose up -d\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 配置无误后重启项目")]),t._v("\ndocker-compose restart\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 若未正常启动，可执行 docker-compose logs -tf --tail 100 来查看错误信息。")]),t._v("\n")])])]),a("h3",{attrs:{id:"pm2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pm2"}},[t._v("#")]),t._v(" PM2")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://ghproxy.com/https://github.com/SilveryStar/Adachi-BOT.git\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" Adachi-BOT\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --registry"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https://registry.npmmirror.com/\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 初次运行将在根目录 config 文件夹下生成配置文件模板")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 根据右上角「配置」选项中的信息配置 setting.yml")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" start\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 确保你已经在 56379 端口上运行 Redis 数据库")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 不会启动数据库的可以参考右上角「FAQ」中的信息")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run restart\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 若未正常启动，可执行 pm2 log adachi-bot 查看错误信息")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 若提示 pm2: command not found，则需执行 npm install -g pm2 进行安装")]),t._v("\n")])])]),a("h2",{attrs:{id:"更新"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更新"}},[t._v("#")]),t._v(" 更新")]),t._v(" "),a("h3",{attrs:{id:"docker-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-2"}},[t._v("#")]),t._v(" Docker")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 注意需在 Adachi-BOT 根目录中运行命令")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" pull\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果更新涉及 Dockerfile 文件则需要 docker-compose down 然后 docker-compose up -d --build")]),t._v("\ndocker-compose restart\n")])])]),a("h3",{attrs:{id:"pm2-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pm2-2"}},[t._v("#")]),t._v(" PM2")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 注意需在 Adachi-BOT 根目录中运行命令")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" pull\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果提示本地有更改可通过 git checkout package*.json (一般会改动的都是package-lock.json文件)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果改的了其他的可用 git reset --hard 把本地改过的全部回滚。")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" restart\n")])])]),a("p",[t._v("下载"),a("code",[t._v("zip")]),t._v("包的方式非常不推荐，但你实在想要用，那么要想更新则需要备份项目里的"),a("code",[t._v("database")]),t._v("、"),a("code",[t._v("data")]),t._v("、"),a("code",[t._v("config")]),t._v("、"),a("code",[t._v("src\\plugins\\你安装的插件")]),t._v("等文件，重新下载"),a("code",[t._v("zip")]),t._v("\n包，然后把这些文件按照它原本的位置放在新的项目文件夹里。")]),t._v(" "),a("h3",{attrs:{id:"指令更新"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#指令更新"}},[t._v("#")]),t._v(" 指令更新")]),t._v(" "),a("p",[t._v("使用指令更新的前提是你是通过"),a("code",[t._v("git")]),t._v("下载的项目，下载"),a("code",[t._v("zip")]),t._v("包的方式不可用该方式。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("命令: <header> upgrade\n范围: 私聊\n权限: BOT主人 (Master)\n")])])]),a("h2",{attrs:{id:"停止"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#停止"}},[t._v("#")]),t._v(" 停止")]),t._v(" "),a("p",[t._v("若你想停掉该项目的运行，同样一句指令即可")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("### Docker")]),t._v("\ndocker-compose down\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("### PM2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" stop\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);